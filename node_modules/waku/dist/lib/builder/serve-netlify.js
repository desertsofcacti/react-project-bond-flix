import { Hono } from 'hono';
import { runner } from '../hono/runner.js';
const loadEntries = ()=>import(import.meta.env.WAKU_ENTRIES_FILE);
const env = process.env;
const app = new Hono();
app.use('*', runner({
    cmd: 'start',
    loadEntries,
    env
}));
app.notFound((c)=>{
    const notFoundHtml = globalThis.__WAKU_NOT_FOUND_HTML__;
    if (typeof notFoundHtml === 'string') {
        return c.html(notFoundHtml, 404);
    }
    return c.text('404 Not Found', 404);
});
export default (async (req, context)=>app.fetch(req, {
        context
    }));
